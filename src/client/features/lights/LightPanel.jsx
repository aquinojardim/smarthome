import React from "react";
import * as actions from "../../reducer/actions/actions";
import { useSelector, useDispatch } from "react-redux";
import { stylesPanel } from "../../styles/stylesPanel";
import { Button, Drawer, List, Divider } from "@material-ui/core";
import PowerSettingsNewIcon from "@material-ui/icons/PowerSettingsNew";
import PowerOffIcon from "@material-ui/icons/PowerOff";
import LightItem from "./lightsComponents/LightItem";
import LightForm from "./lightsComponents/LightForm";



export default function LightPanel() {
  // gives us access to styles object generated by makeStyles
  const classes = stylesPanel();
  // manupulated store central data
  const dispatch = useDispatch();
  // gives acess to store central data
  const { lights } = useSelector((state) => state);
  // reorganizes lights in an array
  const lightsArray = Object.values(lights);

  
  return (
    <Drawer
      classes={{
        paper: classes.drawerPaper,
      }}
      className={classes.drawer}
      variant="permanent"
      anchor="right"
    >
      <h3 className={classes.title}> Lights Panel </h3>
      <div className={classes.drawerContainer}>
        <Button
          // eslint-disable-next-line no-unused-vars
          onClick={(e) => {
            dispatch(actions.allLights(true));
          }}
          color="secondary"
          className={classes.button}
          startIcon={<PowerSettingsNewIcon />}
        >
          All On
        </Button>
        <Button
          // eslint-disable-next-line no-unused-vars
          onClick={(e) => {
            dispatch(actions.allLights(false));
          }}
          color="default"
          className={classes.button}
          startIcon={<PowerOffIcon />}
        >
          All Off
        </Button>
        <List>
          {lightsArray.map((obj, index) => {
            return (
              <LightItem
                key={index + 1}
                id={index + 1}
                name={obj.name}
                status={obj.status}
              />
            );
          })}
          <Divider />
          <LightForm />
        </List>
      </div>
    </Drawer>
  );
}
